---
date: 2025-01-19
tags:
  - Notes
  - MySql
lastUpdated: 2025-01-20T10:10:00
---

## 事务概述

一个事务时一个完整的逻辑单元，不可再分。

​	比如：银行账户转账，从A账户向B账户转钱

​		需要两条update语句

​	以上两条DML语句必须同时成功或者同时失败，不能出现一条成功，一条失败

 

要保证同时的成功和失败，需要使用事务机制

> 事务的存在就是为了保证数据的完整性



## 事务原理

案例：假设一个事务要进行运行insert，再执行update，然后delete，才算完成



​	事务机制：【开始】

​	执行：

​	执行 insert 语句，insert，，，（这个执行成功后，把执行记录到数据库历史操作中，并不会向文件中保存数据，不会真正修改数据

​	执行 update 语句，update，，，（执行后也是记录操作，不会真正修改）

​	执行 delete 语句，delete，，，（这个执行也是记录操作，【记录到缓存】不会真正修改数据）

提交事务或回滚（结束） 

​	**当全部执行结束后，全部同步到硬盘，清空历史缓存**



TCL:

​	提交事务：commit

​	回滚：rollback





## MySQL中的事务机制

MySQL是自动提交事务的

通过:

```sql
Start transaction 关闭自动提交
```

这样进行更改的时候，是不会将内容写入内存的，如果确认无误，可以使用 rolllback 进行回滚



## 事务特性

事务的四个特性：

- 原子性（Atomicity）【A】

- - 整个事务中的所有操作，必须作为一个单元全部完成（或全部取消）。
    - **事务是最小的工作单元，不可再分**

- 一致性（Consistency）【C】

- - 在事务开始之前与结束之后，数据库都保持一致状态。
    - 保证多条DML语句必须同时成功或同时失败

- 隔离性(Isolation)【I】

- - 一个事务不会影响其他事务的运行。

- 持久性(Durability)【D】

- - 在事务完成以后，该事务对数据库所作的更改将持久地保存在数据库之中，并不会被回滚



### 事务的隔离性

事务隔离性存在隔离级，理论上存在4个级别。

InnoDB 实现了四个隔离级别，用以控制事务所做的修改，并将修改通告至其它并发的事务：



- **读未提交**（READ UMCOMMITTED）

​	允许一个事务可以看到其他事务未提交的修改。

读未提交存在脏读现象（Dirty Read），表示读到脏的数据【数据及其不稳定，数据不在硬盘中】



- **读已提交**（READ COMMITTED）

​	允许一个事务只能看到其他事务已经提交的修改，未提交的修改是不可见的。

脏读现象解决了

读已提交存在的问题：不可重复读【不同时刻读到的数据不一样】



- 可重复读（REPEATABLE READ）

​	确保如果在一个事务中执行两次相同的SELECT语句，都能得到相同的结果，不管其他事务是否提交这些修改。（银行总账）

该隔离级别为InnoDB的缺省设置。

这种隔离级别解决了不可重复读的问题，只要运行一个事务，从开始到结束，都是一样的数据。



- **串行化**（SERIALIZABLE）【序列化】

​	将一个事务与其他事务完全地隔离。

 

例:

> A 可以开启事物,B 也可以开启事物
>
> A 在事物中执行DML 语句时,未提交
>
> B 不以执行 DML,DQL 语句

 

MySQL默认隔离级别：读已提交【三档】

Oracle默认隔离级别：可重复读

![img](data:image/png;base64,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)

 

关闭自动提交：

```sql
start transaction;
```



## 设置隔离级别

演示两个事务，假如隔离级别

演示第1级别：读未提交

```sql
set global transaction isolation level read uncommitted;
```



演示第2级别：读已提交

```sql
set global transaction isolation level read committed;
```



演示第3级别：可重复读

```sql
set global transaction isolation level repeatable read;
```



**查看隔离级别**

服务器变量 tx_isolation（包括会话级和全局级两个变量）中保存着当前的会话隔离级别。

为了查看当前隔离级别，可访问 tx_isolation 变量：

查看会话级的当前隔离级别：



  ```sql
  mysql> SELECT @@tx_isolation;
  ```

  或：

 ```sql
 mysql> SELECT @@session.tx_isolation;
 ```



查看全局级的当前隔离级别：

```sql
mysql> SELECT @@global.tx_isolation;
```



































